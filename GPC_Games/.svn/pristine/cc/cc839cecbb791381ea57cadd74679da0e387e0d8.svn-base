/* The Knight has armor which prevents him from getting knocked back from an enemy action. Also,
he drops less candy when hit. However, movement speed is slightly slower.

STATS
move speed = slow (0.75x move speed)
candy drop amt = low (2 pieces of candy per hit)
cooldown = normal (5 seconds / 300 frames) */

package 
{
	import flash.display.MovieClip;
	import flash.events.KeyboardEvent;
	import flash.ui.Keyboard;
	import flash.events.Event;
	
	public class Knight extends Player
	{

		public function Knight() 
		{
			
			//addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
			_playerName = "Knight";
			_candyAmount = 0;
			_cooldown = 300;		//5 seconds to recharge scare attack
			_dropAmount = 2;
			_vx = 0;
			_vy = 0;
			_moveSpeed = 0.75;
			
			//event listeners
			stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown);
			stage.addEventListener(KeyboardEvent.KEY_UP, onKeyUp);
			addEventListener(Event.ENTER_FRAME, onEnterFrame);
		}
		
		/* Keyboard controls. The player can move up, down, left and right.  The player can perform
		an action by pressing the Spacebar. */
		private function onKeyDown(event:KeyboardEvent):void
		{
			//Walk left
			if (event.keyCode == Keyboard.LEFT)
			{
				//_accelX = -0.2;	
				_vx = -1;
			}
				
			//Walk right
			if (event.keyCode == Keyboard.RIGHT)
			{
				//_accelX = 0.2;
				_vx = 1;
			}
								
			//Walk down
			if (event.keyCode == Keyboard.DOWN)
			{
				//_accelY = 0.2;
				_vy = 1;
			}
			
			//Walk up
			if (event.keyCode == Keyboard.UP)
			{
				//_accelY = -0.2;
				_vy = -1;
			}
			
			//Action button
			if (event.keyCode == Keyboard.SPACE)
			{
				//perform the player-specific action
				UseAction();
			}
		}
		
		/* This function checks when a key is released */
		private function onKeyUp(event:KeyboardEvent):void
		{
			if(event.keyCode == Keyboard.LEFT || event.keyCode == Keyboard.RIGHT)
			{
				_vx = 0;
			}
					
			if (event.keyCode == Keyboard.SPACE)
			{
				//Nothing should happen. Once the space is pressed, the action should go into cooldown
			}
				
			if (event.keyCode == Keyboard.DOWN || event.keyCode == Keyboard.UP)
			{
				_vy = 0;
			}
		}
		
		function UseAction():void
		{
			/* The Knight has a sword attack that will knock the opponent back and cause him to
			drop some candy. This is considered to be a STANDARD attack, i.e. all characters who
			don't have a unique action has this action (except the Princess).
			
			when the action is performed, a rectangle is created in front of the Knight. Any target that
			collides with it gets knocked back and loses candy.
			*/
		}
		
		function onEnterFrame(event:Event):void
		{
			
		}

	}
	
}

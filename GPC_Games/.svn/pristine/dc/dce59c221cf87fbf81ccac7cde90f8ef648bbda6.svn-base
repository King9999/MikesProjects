/* This class manages all of the House objects. It controls whether a house has candy, and how much
candy it has. 

-At the start of the game, there will be a 50% chance that a house will have candy.
-At each frame, the game will check if a house is empty. If it is, then there's a 0.00002% chance
it'll get restocked.
-Houses normally have 1-10 pieces of candy. Each time a house is stocked, there will be a 20% chance 
that a house will have 20 pieces of candy.
-There will be 10 houses in the game.
*/



package  
{
	import flash.display.MovieClip;
	import House;
	import flash.events.Event;
	
	public class HouseManager extends MovieClip
	{
		private var _houseArray:Array = new Array(); 
		private var _houseVector:Vector.<House> = new Vector.<House>();
		//var clock:Clock = new Clock(60);

		public function HouseManager() 
		{
			
			//Set up each house in the vector.				
			_houseVector.push(house0);
			_houseVector.push(house1);
			_houseVector.push(house2);
			_houseVector.push(house3);
			_houseVector.push(house4);
			_houseVector.push(house5);
			_houseVector.push(house6);
			_houseVector.push(house7);
			_houseVector.push(house8);
			_houseVector.push(house9);
			
			//Randomly determine which houses start with candy
			trace("HouseVector size: " + _houseVector.length);
			var chance:int;
			for (var i = 0; i < _houseVector.length; i++)
			{
				chance = Math.floor(Math.random() * 100) + 1;
				if (chance <= 50)
				{
					_houseVector[i].StockUp();
				}
				//trace ("House " + i + " candy amount: " + _houseVector[i].GetCandyAmount());
			}
		
			
			//we need this here so that updates can happen each frame.
			addEventListener(Event.ENTER_FRAME, onEnterFrame);
			
		}
		
		
		function onEnterFrame(event:Event):void
		{
			//The only thing this function does is check if a house will get stocked
			//with candy.  There's a 0.00002% chance this will happen.  The number is low
			//because the game is checking 60 times a second.  Don't want the houses
			//to fill up too quickly.
			var chance:Number;
			
			for (var i = 0; i < _houseVector.length; i++)
			{
				if (!_houseVector[i].HasCandy())
				{
					chance = Math.floor(Math.random() * 100);
					if (chance <= 0.00002)
					{
						_houseVector[i].StockUp();
					}
				}
			}
			
		}

	}
	
}
